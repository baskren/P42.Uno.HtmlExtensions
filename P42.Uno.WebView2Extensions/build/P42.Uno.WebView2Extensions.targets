<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">



  <Target
    Condition="   $(OutputType) != 'Library' AND  '@(WebView2ProjectContentFile)' != ''"
    Name="P42_IncludeWebView2ProjectContentFiles"
    BeforeTargets="BeforeBuild;UnoResourcesGeneration;BeforeCompile">

    <!--
    <ItemGroup>
      <_p42_webview2_file Include="$(MSBuildProjectDirectory)/%(WebView2ProjectContentFolder.Identity)/**/*.*">
        <Folder>%(WebView2ProjectContentFolder.Identity)</Folder>
      </_p42_webview2_file>
    </ItemGroup>
    -->


    <ItemGroup>


      <!--
      <Content
        Include="@(_p42_webview2_file)"
        Link="PIZZA/%(_p42_webview2_file.Folder)/%(RecursiveDir)%(Filename)%(Extension)"
        Visible="false"
        CopyToOutputDirectory="PreserveNewest" />

      <Content
        Include="@(_p42_webview2_file)"
        Link="%(_p42_webview2_file.Folder)/%(RecursiveDir)%(Filename)%(Extension)"
        Visible="true"
        CopyToOutputDirectory="PreserveNewest" />

      <AndroidAsset
        Condition="  $(TargetFramework.Contains('android')) "
        Include="@(_p42_webview2_file)"
        Visible="false"
        Link="Platforms/Android/Assets/WebView2ProjectContentFolders/%(_p42_webview2_file.Folder)/%(RecursiveDir)%(Filename)%(Extension)" />

      <BundleResource
        Condition="  $(TargetFramework.Contains('ios')) "
        Include="@(_p42_webview2_file)"
        Visible="false"
        Link="Platforms/iOS/Resources/WebView2ProjectContentFolders/%(_p42_webview2_file.Folder)/%(RecursiveDir)%(Filename)%(Extension)" />

      <Content
        Condition="  $(TargetFramework.Contains('windows'))  OR   $(TargetFramework.Contains('desktop'))  "
        Include="@(_p42_webview2_file)"
        Link="WebView2ProjectContentFolders/%(_p42_webview2_file.Folder)/%(RecursiveDir)%(Filename)%(Extension)"
        Visible="false"
        CopyToOutputDirectory="PreserveNewest" />


      <Content
        Condition="  $(TargetFramework.Contains('wasm')) "
        Include="@(_p42_webview2_file)"
        Link="%(_p42_webview2_file.Folder)/%(RecursiveDir)%(Filename)%(Extension)"
        Visible="false"
        UnoDeploy="Root"
        CopyToOutputDirectory="PreserveNewest" />

      <Content
        Include="@(WebView2ProjectContentFile)"
        Link="WebView2ProjectContentFolders/%(WebView2ProjectContentFile.Identity)"
        Visible="true"
        CopyToOutputDirectory="PreserveNewest" />

        -->

      <AndroidAsset
        Condition="  $(TargetFramework.Contains('android')) "
        Include="@(WebView2ProjectContentFile)"
        Visible="false"
        Link="Platforms/Android/Assets/WebView2ProjectContentFolders/%(Identity)" />

      <BundleResource
        Condition="  $(TargetFramework.Contains('ios')) "
        Include="@(WebView2ProjectContentFile)"
        Visible="false"
        Link="Platforms/iOS/Resources/WebView2ProjectContentFolders/%(Identity)" />

      <Content
        Condition="  $(TargetFramework.Contains('windows'))  OR   $(TargetFramework.Contains('desktop'))  "
        Include="@(WebView2ProjectContentFile)"
        Link="WebView2ProjectContentFolders/%(Identity)"
        Visible="false"
        CopyToOutputDirectory="PreserveNewest" />

      <Content
        Condition="  $(TargetFramework.Contains('wasm')) "
        Include="@(WebView2ProjectContentFile)"
        Link="%(Identity)"
        Visible="false"
        UnoDeploy="Root"
        CopyToOutputDirectory="PreserveNewest" />


    </ItemGroup>

    <Message
      Text="ProjectContentFile: ID[%(WebView2ProjectContentFile.Identity)] LINK[%(WebView2ProjectContentFile.Link)]"
      Importance="high"
      />

    <Message
      Condition=" $(TargetFramework.Contains('android')) "
      Text="AndroidAsset: ID[%(AndroidAsset.Identity)]     LINK[%(AndroidAsset.Link)]"
      Importance="High" />
    <Message
      Condition=" $(TargetFramework.Contains('ios'))"
      Text="BundleResource: ID[%(BundleResource.Identity)]     LINK[%(BundleResource.Link)]"
      Importance="High" />
    <Message
      Condition=" $(TargetFramework.Contains('windows'))  OR  $(TargetFramework.Contains('desktop'))  OR  $(TargetFramework.Contains('wasm')) "
      Text="WinDeskWasm Content: ID[%(Content.Identity)]     LINK[%(Content.Link)]"
      Importance="High" />

  </Target>

</Project>
