<Project>
  <ItemGroup>
    <!-- You add this in your .csproj -->
    <!-- <WebView2ProjectContentFolder Include="MyWebAssets" /> -->
  </ItemGroup>


  <Target Condition="'@(WebView2ProjectContentFolder)' != ''" Name="P42_TransformWebView2ProjectContentFolders" BeforeTargets="BeforeBuild">

    <ItemGroup>
      <_p42_webview2_file Include="$(MSBuildProjectDirectory)/%(WebView2ProjectContentFolder.Identity)/**/*.*">
        <Folder>%(WebView2ProjectContentFolder.Identity)</Folder>
      </_p42_webview2_file>
    </ItemGroup>

    <Message Text="  MSBuildProjectDirectory:[$(MSBuildProjectDirectory)]" Importance="high"/>
    <Message Text="  WebView2ProjectContentFolder:[%(WebView2ProjectContentFolder.Identity)]" Importance="high" />
    <Message Text="  _WebView2Root:[%(_WebView2Root.Identity)] [%(_WebView2Root.Folder)]" Importance="high"/>

    <ItemGroup>
      <AndroidAsset
        Condition=" $(TargetFramework.Contains('android'))"
        Include="@(_p42_webview2_file)"
        Link="Platforms/Android/Assets/WebView2ProjectContentFolders/%(_p42_webview2_file.Folder)/%(RecursiveDir)%(Filename)%(Extension)" />

      <BundleResource
        Condition=" $(TargetFramework.Contains('ios'))"
        Include="@(_p42_webview2_file)"
        Link="Platforms/iOS/Resources/WebView2ProjectContentFolders/%(_p42_webview2_file.Folder)/%(RecursiveDir)%(Filename)%(Extension)" />

      <Content
        Condition=" $(TargetFramework.Contains('windows'))  OR  $(TargetFramework.Contains('desktop'))  OR  $(TargetFramework.Contains('wasm')) "
        Include="@(_p42_webview2_file)"
        Link="WebView2ProjectContentFolders/%(_p42_webview2_file.Folder)/%(RecursiveDir)%(Filename)%(Extension)"
        CopyToOutputDirectory="PreserveNewest" />

    </ItemGroup>

  <!--
    <Message
      Condition=" $(TargetFramework.Contains('android')) "
      Text="AndroidAsset: ID[%(AndroidAsset.Identity)]     LINK[%(AndroidAsset.Link)]"
      Importance="High" />
    <Message
      Condition=" $(TargetFramework.Contains('ios'))"
      Text="BundleResource: ID[%(BundleResource.Identity)]     LINK[%(BundleResource.Link)]"
      Importance="High" />
    <Message
      Condition=" $(TargetFramework.Contains('windows'))  OR  $(TargetFramework.Contains('desktop'))  OR  $(TargetFramework.Contains('wasm')) "
      Text="W Content: ID[%(Content.Identity)]     LINK[%(Content.Link)]"
      Importance="High" />
-->

  </Target>


</Project>
